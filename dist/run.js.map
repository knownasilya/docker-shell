{"version":3,"sources":["../lib/run.js"],"names":["Bluebird","require","module","exports","run","spawn","command","args","resolve","reject","err","proc","stderr","on","data","console","log","toString","stdout","code"],"mappings":"AAAA;;AAEA,MAAMA,WAAWC,QAAQ,UAAR,CAAjB;;AAEAC,OAAOC,OAAP,GAAiB,SAASC,GAAT,CAAaC,KAAb,EAAoBC,OAApB,EAA6BC,IAA7B,EAAmC;AAClD,SAAO,IAAIP,QAAJ,CAAa,CAACQ,OAAD,EAAUC,MAAV,KAAqB;AACvCJ,UAAMC,OAAN,EAAe,UAAUI,GAAV,EAAeC,IAAf,EAAqB;AAClC,UAAID,GAAJ,EAAS;AACP,eAAOD,OAAOC,GAAP,CAAP;AACD;;AAEDC,WAAKC,MAAL,CAAYC,EAAZ,CAAe,MAAf,EAAuB,UAAUC,IAAV,EAAgB;AACrCC,gBAAQC,GAAR,CAAY,OAAZ,EAAqBF,KAAKG,QAAL,EAArB;AACD,OAFD;;AAIAN,WAAKO,MAAL,CAAYL,EAAZ,CAAe,MAAf,EAAuB,UAAUC,IAAV,EAAgB;AACrCC,gBAAQC,GAAR,CAAY,OAAZ,EAAqBF,KAAKG,QAAL,EAArB;AACD,OAFD;;AAIAN,WAAKE,EAAL,CAAQ,MAAR,EAAgB,UAAUM,IAAV,EAAgB;AAC9BJ,gBAAQC,GAAR,CAAY,aAAZ,EAA2BG,IAA3B;AACA,YAAIA,OAAO,CAAX,EAAc;AACZ,iBAAOV,OAAOU,IAAP,CAAP;AACD;;AAEDX,gBAAQW,IAAR;AACD,OAPD;AAQD,KArBD;AAsBD,GAvBM,CAAP;AAwBD,CAzBD","file":"run.js","sourcesContent":["'use strict';\n\nconst Bluebird = require('bluebird');\n\nmodule.exports = function run(spawn, command, args) {\n  return new Bluebird((resolve, reject) => {\n    spawn(command, function (err, proc) {\n      if (err) {\n        return reject(err);\n      }\n\n      proc.stderr.on('data', function (data) {\n        console.log('[err]', data.toString());\n      });\n\n      proc.stdout.on('data', function (data) {\n        console.log('[out]', data.toString());\n      });\n\n      proc.on('exit', function (code) {\n        console.log('[exit] with', code);\n        if (code > 0) {\n          return reject(code);\n        }\n\n        resolve(code);\n      });\n    });\n  });\n}"]}